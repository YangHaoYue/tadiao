(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mine-projectClues-relation-relation"],{"61ef":function(t,e,i){"use strict";var s=i("4ea4");i("99af"),i("4160"),i("d81d"),i("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=s(i("2909")),n={onLoad:function(t){this.project_id=t.project_id,this.getInfo()},onReachBottom:function(){var t=this;this.tabList[this.current].page>=this.tabList[this.current].last_page||(this.status="loading",this.tabList[this.current].page=++this.tabList[this.current].page,setTimeout((function(){t.getInfo()}),50))},computed:{isSelectedAll:{get:function(){return this.tabList[this.current].list.length===this.tabList[this.current].selectedList.length&&this.tabList[this.current].selectedList.length>0},set:function(){}},count:function(){return this.tabList[0].selectedList.length+this.tabList[1].selectedList.length}},data:function(){return{project_id:"",current:0,tabList:[{name:"本公司",list:[],page:1,last_page:1,selectedList:[]},{name:"其他公司",list:[],page:1,last_page:1,selectedList:[]}],btnStyle:{fontSize:"28rpx"},status:"loading",iconType:"flower",loadText:{loadmore:"轻轻上拉",loading:"努力加载中",nomore:"实在没有了"}}},methods:{getInfo:function(){var t=this;this.http.get("project/getTowersForLock",{type:this.current,project_id:this.project_id,page:this.tabList[this.current].page}).then((function(e){if(1e3==e.code){if(0==t.tabList[t.current].list.length)t.tabList[t.current].list=e.data.tower_data,t.tabList[t.current].list.forEach((function(e){t.$set(e,"checked",!1)})),t.tabList[t.current].last_page=e.data.last_page;else{var i=e.data.tower_data.forEach((function(e){t.$set(e,"checked",!1)}));t.tabList[t.current].list.concat(i)}console.log(t.tabList[t.current].list),t.tabList[t.current].page>=t.tabList[t.current].last_page?t.status="nomore":t.status="loadmore"}}))},change:function(t){this.current=t,this.getInfo()},checkboxGroupChange:function(t){console.log(t),this.tabList[this.current].selectedList=t},doSelectedAll:function(){this.isSelectedAll?this.unCheckedAll():this.checkedAll()},checkedAll:function(){this.tabList[this.current].selectedList=this.tabList[this.current].list.map((function(t){return t.checked=!0,t.id}))},unCheckedAll:function(){this.tabList[this.current].list.forEach((function(t){t.checked=!1})),this.tabList[this.current].selectedList=[]},submit:function(){var t=this;if(0==this.count)return this.$u.toast("请选择您要关联的塔吊！");this.http.post("project/projectLockTower",{project_id:this.project_id,tower_ids:[].concat((0,c.default)(this.tabList[0].selectedList),(0,c.default)(this.tabList[1].selectedList))}).then((function(e){t.$u.toast(e.msg),1e3==e.code&&setTimeout((function(){uni.redirectTo({url:"associated?show_btn=1&project_id="+t.project_id})}),1500)}))}}};e.default=n},a43b:function(t,e,i){var s=i("b5e2");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var c=i("4f06").default;c("7720d860",s,!0,{sourceMap:!1,shadowMode:!1})},a8a7:function(t,e,i){"use strict";i.r(e);var s=i("d44ec"),c=i("d8d6");for(var n in c)"default"!==n&&function(t){i.d(e,t,(function(){return c[t]}))}(n);i("c169");var a,o=i("f0c5"),r=Object(o["a"])(c["default"],s["b"],s["c"],!1,null,"eee760c4",null,!1,s["a"],a);e["default"]=r.exports},b5e2:function(t,e,i){var s=i("24fb");e=s(!1),e.push([t.i,"uni-page-body[data-v-eee760c4]{\n\t/* background: -webkit-linear-gradient(top,#FBFBFD,#F5F6FA); */background-color:#f5f6fa}body.?%PAGE?%[data-v-eee760c4]{background-color:#f5f6fa}",""]),t.exports=e},c169:function(t,e,i){"use strict";var s=i("a43b"),c=i.n(s);c.a},d44ec:function(t,e,i){"use strict";i.d(e,"b",(function(){return c})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return s}));var s={uTabs:i("945b").default,uCheckboxGroup:i("4a4e").default,uRow:i("2bdc").default,uCol:i("8457").default,uCheckbox:i("5878").default,uButton:i("64a3").default},c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("u-tabs",{attrs:{list:t.tabList,"is-scroll":!1,current:t.current,"active-color":"#0F58FB"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.change.apply(void 0,arguments)}}}),i("u-checkbox-group",{staticStyle:{width:"100%"},attrs:{shape:"circle","active-color":"#0F58FB"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.checkboxGroupChange.apply(void 0,arguments)}}},[i("u-row",{staticClass:"u-m-t-30",staticStyle:{width:"100%"},attrs:{gutter:"20",justify:"space-between"}},t._l(t.tabList[t.current].list,(function(e,s){return i("u-col",{key:s,staticClass:"u-m-b-20",attrs:{span:"6"}},[i("v-uni-label",{attrs:{for:"item"+e.id}},[i("equipmentItem",{attrs:{item:e,index:s}},[i("v-uni-view",{attrs:{slot:"footer"},slot:"footer"},[i("v-uni-view",{staticClass:"u-font-26 u-p-l-6 u-flex u-row-between u-p-b-20",staticStyle:{color:"#666666","line-height":"1.5"}},[i("v-uni-view",[t._v("年限："+t._s(e.age_limit))]),i("u-checkbox",{attrs:{shape:"circle","active-color":"#0F58FB",name:e.id},model:{value:e.checked,callback:function(i){t.$set(e,"checked",i)},expression:"item.checked"}})],1)],1)],1)],1)],1)})),1)],1),i("v-uni-view",{staticClass:"cu-tabbar-height"}),i("v-uni-view",{staticClass:"saveBtn bg-white solid-top u-flex u-row-between",staticStyle:{height:"90rpx"}},[i("v-uni-label",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.doSelectedAll.apply(void 0,arguments)}}},[i("u-checkbox",{staticClass:"u-flex u-m-l-40",attrs:{shape:"circle","active-color":"#0F58FB"},model:{value:t.isSelectedAll,callback:function(e){t.isSelectedAll=e},expression:"isSelectedAll"}},[t._v("全选")])],1),i("v-uni-view",{staticClass:"u-flex u-m-r-20"},[i("v-uni-view",{staticClass:"u-m-r-20 u-font-22",staticStyle:{color:"#666666"}},[t._v("已选择"+t._s(t.count)+"个")]),i("u-button",{attrs:{type:"primary",size:"medium","custom-style":t.btnStyle},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v("关联")])],1)],1)],1)},n=[]},d8d6:function(t,e,i){"use strict";i.r(e);var s=i("61ef"),c=i.n(s);for(var n in s)"default"!==n&&function(t){i.d(e,t,(function(){return s[t]}))}(n);e["default"]=c.a}}]);